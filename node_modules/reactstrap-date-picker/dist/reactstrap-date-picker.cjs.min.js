"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("reactstrap"),a=require("prop-types");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var l=n(e),r=n(a),o=e=>{var{children:a,customInputGroup:n,size:r,inputId:o}=e;return null!=n?l.default.cloneElement(n,{children:a}):l.default.createElement(t.InputGroup,{size:r,id:o,className:"rdp-input-group"},a)},u=e=>{var{overlayContainerRef:t}=e;return l.default.createElement("div",{ref:t,className:"rdp-overlay"})},d=e=>{var{inputId:t,name:a,value:n,formattedValue:r,hiddenInputRef:o}=e;return l.default.createElement("input",{ref:o,type:"hidden",className:"rdp-hidden",id:t,name:a,value:n||"","data-formattedvalue":r})},c=e=>{var{inputValue:a,disabled:n,clearButtonElement:r,onClick:o}=e;return l.default.createElement("div",{className:"rdp-addon input-group-append"},l.default.createElement(t.InputGroupText,{onClick:()=>n?null:o(),style:{opacity:a&&!n?1:.5,cursor:a&&!n?"pointer":"not-allowed"}},r))};function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){f(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var p=e=>{var{customControl:a,controlId:n,value:r,required:o,placeholder:u,inputRef:d,disabled:c,className:s,style:f,autoFocus:p,autoComplete:m,valid:v,invalid:y,onInvalid:g,noValidate:h,onKeyDown:D,onFocus:b,onBlur:w,onChange:E}=e,k="".concat(!0===y?"is-invalid":""," ").concat(!0===v?"is-valid":"");return null!=a?l.default.cloneElement(a,{id:n,value:r||"",required:o,placeholder:u,ref:d,disabled:c,className:"rdp-form-control ".concat(s||""," ").concat(a.props.className||""," ").concat(k),style:i(i({},a.props.style||{}),f||{}),autoComplete:m,onInvalid:g,noValidate:h,onKeyDown:D,onFocus:b,onBlur:w,onChange:E}):l.default.createElement(t.Input,{id:n,name:n,value:r||"",required:o,placeholder:u,innerRef:d,disabled:c,type:"text",className:"rdp-form-control ".concat(s||""," ").concat(k),style:f,autoFocus:p,autoComplete:m,onInvalid:g,noValidate:h,onKeyDown:D,onFocus:b,onBlur:w,onChange:E})},m=e=>e?(e.setHours(12-e.getTimezoneOffset()/60),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e):null,v=e=>e?m(new Date(e)):null,y=e=>e?m(e).toISOString():null,g=(e,t,a)=>{var n=e.getMonth()+1,l=e.getDate();return a.match(/MM.DD.YYYY/)?(n>9?n:"0".concat(n))+t+(l>9?l:"0".concat(l))+t+e.getFullYear():a.match(/DD.MM.YYYY/)?(l>9?l:"0".concat(l))+t+(n>9?n:"0".concat(n))+t+e.getFullYear():e.getFullYear()+t+(n>9?n:"0".concat(n))+t+(l>9?l:"0".concat(l))},h=(e,t)=>null!=e&&""!=e?e:null!=t&&""!=t?t:(()=>{if("object"==typeof window){null==window._reactstrapDatePickerInstance&&(window._reactstrapDatePickerInstance=0);var e=window._reactstrapDatePickerInstance+1;return window._reactstrapDatePickerInstance=e,e}if("object"==typeof process){null==process._reactstrapDatePickerInstance&&(process._reactstrapDatePickerInstance=0);var t=process._reactstrapDatePickerInstance+1;return process._reactstrapDatePickerInstance=t,t}return console.error("Reactstrap Date Picker cannot determine environment (it is neither browser's <window> nor Node's <process>)."),1})().toString(),D=(e,t,a)=>{var n,l=h(e,t),r="rdp-input-group-".concat(l),o=null!=e?e:"rdp-hidden-".concat(l),u="rdp-form-control-".concat(l);return null!=a&&null!=a&&null!==(n=a.props)&&void 0!==n&&n.id&&(u=a.props.id),[r,o,u]},b=(e,t)=>t>1?e.slice(t).concat(e.slice(0,t)):1===t?e.slice(1).concat(e.slice(0,1)):e,w=(e,t)=>{try{var a=new Date(e),n=new Date(t),l=a.getFullYear()==n.getFullYear();return a.getMonth()==n.getMonth()&&l}catch(e){return console.error(e),!0}};function E(t){var{previousButtonElement:a,nextButtonElement:n,displayDate:r,minDate:o,maxDate:u,onChange:d,monthLabels:c}=t,[s,i]=e.useState(!1),[f,p]=e.useState(!1),[m,v]=e.useState("");e.useEffect((()=>{if(null!=r){i(!!o&&w(r,o)),p(!!u&&w(r,u));try{v("".concat(c[r.getMonth()]," ").concat(r.getFullYear()))}catch(e){console.error(e)}}}),[r,o,u,c]);var y=e=>{var t=new Date(r);t.setDate(1),t.setMonth(t.getMonth()+e),d(t)};return l.default.createElement("div",{className:"rdp-header text-center"},l.default.createElement("div",{className:"text-muted rdp-header-previous-wrapper",onClick:()=>y(-1),style:{cursor:"pointer",float:"left",userSelect:"none"}},s?null:a),l.default.createElement("span",null,m),l.default.createElement("div",{className:"text-muted rdp-header-next-wrapper",onClick:()=>y(1),style:{cursor:"pointer",float:"right",userSelect:"none"}},f?null:n))}var k=e=>{var{dayLabels:t,showWeeks:a,cellPadding:n}=e;return l.default.createElement("thead",null,l.default.createElement("tr",null,a?l.default.createElement("td",{className:"text-muted current-week",style:{padding:n}}):null,t.map(((e,t)=>l.default.createElement("td",{key:t,className:"text-muted",style:{padding:n}},l.default.createElement("small",null,e))))))},C=()=>l.default.createElement("td",null),B={normal:"",muted:"text-muted",selected:"bg-primary",current:"text-primary"},O=e=>{var{day:t,mode:a,onDayClick:n,cellPadding:r,roundedCorners:o}=e;return l.default.createElement("td",{"data-day":t,onClick:e=>{"muted"!=a&&n(e)},style:{cursor:"muted"==a?"default":"pointer",padding:r,borderRadius:o?"5px":"0px"},className:B[a]},t)},P=e=>{var{weekNum:t,cellPadding:a}=e;return l.default.createElement("td",{style:{padding:a,fontSize:"0.8em",color:"darkgrey"},className:"text-muted"},t)},S=e=>{var{calendarDays:t,showWeeks:a,onDayClick:n,cellPadding:r,roundedCorners:o}=e;return t?l.default.createElement("tbody",null,t.map(((e,t)=>l.default.createElement("tr",{key:"rdp_calendar_week_".concat(t)},a?l.default.createElement(P,{key:"rdp_calendar_week_".concat(t,"_weeknum"),weekNum:e.weekNum,cellPadding:r}):null,e.weekDays.map(((e,a)=>e.inMonth?l.default.createElement(O,{key:"rdp_calendar_week_".concat(t,"_day_").concat(a),day:e.day,mode:e.mode,onDayClick:n,cellPadding:r,roundedCorners:o}):l.default.createElement(C,{key:"rdp_calendar_week_".concat(t,"_day_").concat(a)}))))))):l.default.createElement("tbody",null)},Y=e=>{var{dayLabels:a,showWeeks:n,handleTodayClick:r,showTodayButton:o,todayButtonLabel:u}=e;return o?l.default.createElement("tfoot",null,l.default.createElement("tr",null,l.default.createElement("td",{colSpan:a.length+(n?1:0),style:{paddingTop:"9px"}},l.default.createElement(t.Button,{block:!0,size:"sm",className:"u-today-button",onClick:()=>r()},u)))):null},I=[31,28,31,30,31,30,31,31,30,31,30,31];function M(t,a,n,l,r){var[o,u]=e.useState(void 0),[d,c]=e.useState(void 0),[s,f]=e.useState(void 0),[p,v]=e.useState([]);return e.useEffect((()=>{t&&(u(t.getFullYear()),c(t.getMonth()))}),[t]),e.useEffect((()=>{f(function(e,t,a){if(null!=e&&null!=t){var n=new Date(e,t,1),l=a>1?n.getDay()-a+7:1===a?0===n.getDay()?6:n.getDay()-1:n.getDay(),r=I[t];1==t&&(e%4==0&&e%100!=0||e%400==0)&&(r=29);for(var o=(e,t,a)=>e<=r&&(t>0||a>=l),u=a=>{var n=new Date(e,t,a-1,12,0,0,0),l=new Date(n.valueOf()),r=(n.getDay()+6)%7;l.setDate(l.getDate()-r+3);var o=l.valueOf();return l.setMonth(0,1),4!==l.getDay()&&l.setMonth(0,1+(4-l.getDay()+7)%7),1+Math.ceil((o-l)/6048e5)},d=[],c=1,s=0;s<9;s++){for(var i=[],f=0;f<=6;f++)o(c,s,f)?(i.push({inMonth:!0,day:c}),c+=1):i.push({inMonth:!1});var p=u(c);if(d.push({weekDays:i,weekNum:p}),c>r)break}return{year:e,month:t,weeks:d}}}(o,d,r))}),[o,d,r]),e.useEffect((()=>{v(function(e,t,a,n){if(null==e)return[];var l=[];return e.weeks.map((r=>{var o=r.weekNum,u=r.weekDays.map((l=>{return i(i({},l),{},{mode:l.inMonth?(r=l.day,o=m(new Date(e.year,e.month,r,12,0,0,0)).toISOString(),u=null!=a&&Date.parse(o)<Date.parse(m(new Date(a))),d=null!=n&&Date.parse(o)>Date.parse(m(new Date(n))),c=m(new Date),s=m(new Date(t)),u||d?"muted":Date.parse(o)===Date.parse(s)?"selected":Date.parse(o)===Date.parse(c)?"current":"normal"):void 0});var r,o,u,d,c,s}));l.push({weekNum:o,weekDays:u})})),l}(s,a,n,l))}),[s,a,n,l]),p}var N=e=>{var{selectedDate:a,displayDate:n,minDate:r,maxDate:o,onChange:u,dayLabels:d,cellPadding:c,weekStartsOn:s,showTodayButton:i,todayButtonLabel:f,roundedCorners:p,showWeeks:v,monthLabels:y,previousButtonElement:g,nextButtonElement:h,placement:D,open:b,container:w,target:C,onChangeMonth:B}=e,O=M(n,a,r,o,s);return l.default.createElement(l.default.Fragment,null,l.default.createElement(t.Popover,{className:"rdp-popover ".concat(D),isOpen:b,container:w,target:C,placement:D},l.default.createElement(t.PopoverHeader,{tag:"div"},l.default.createElement(E,{previousButtonElement:g,nextButtonElement:h,displayDate:n,minDate:r,maxDate:o,onChange:e=>B(e),monthLabels:y})),l.default.createElement(t.PopoverBody,null,l.default.createElement("table",{className:"rdp-calendar text-center"},l.default.createElement(k,{dayLabels:d,showWeeks:v,cellPadding:c}),l.default.createElement(S,{calendarDays:O,showWeeks:v,onDayClick:e=>{var t=e.currentTarget.getAttribute("data-day"),a=m(new Date(n));a.setDate(t),u(a)},cellPadding:c,roundedCorners:p}),l.default.createElement(Y,{dayLabels:d,showWeeks:v,handleTodayClick:()=>{var e=m(new Date);u(e)},showTodayButton:i,todayButtonLabel:f})))))};N.propTypes={selectedDate:r.default.object,displayDate:r.default.object,minDate:r.default.string,maxDate:r.default.string,onChange:r.default.func.isRequired,dayLabels:r.default.array.isRequired,cellPadding:r.default.string.isRequired,weekStartsOn:r.default.number,showTodayButton:r.default.bool,todayButtonLabel:r.default.string,roundedCorners:r.default.bool,showWeeks:r.default.bool,monthLabels:r.default.array.isRequired,previousButtonElement:r.default.oneOfType([r.default.string,r.default.object]).isRequired,nextButtonElement:r.default.oneOfType([r.default.string,r.default.object]).isRequired,placement:r.default.oneOfType([r.default.string,r.default.func])};var x,j=e=>{var t=Object.prototype.toString.call(e);return"[object AsyncFunction]"===t||"[object Function]"===t||"[object GeneratorFunction]"===t||"[object Proxy]"===t?e():e},L=(t,a,n,l,r)=>{var[o,u]=e.useState(!1),[d,c]=e.useState(j(t)),s=e.useRef(),i=e.useRef(),f=a||e.useRef(),[p,m]=((t,a,n)=>[e.useCallback((()=>{if(a){var e=document.createEvent("CustomEvent");e.initEvent("Change Date",!0,!1),t.current.dispatchEvent(e),a(e)}}),[t,a]),e.useCallback((()=>{if(n){var e=document.createEvent("CustomEvent");e.initEvent("Change Date",!0,!1),t.current.dispatchEvent(e),n(e)}}),[t,n])])(f,l,r);e.useEffect((()=>{function e(e){e.stopPropagation(),o&&i&&i.current&&!i.current.contains(e.target)&&(u(!1),p())}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[o,i,p]);var v=e.useCallback((()=>{var e=j(t);c(e),u(!0),m()}),[t,m]);return[s,i,f,o,d,v,e=>{o&&!e||(u(!1),p())}]},F=void 0===F?function(){}:F,_=r.default.oneOfType([r.default.func,r.default.shape({current:r.default.instanceOf(F)})]),T=r.default.oneOfType([r.default.string,r.default.object]),R={value:r.default.string,defaultValue:r.default.string,id:r.default.string,name:r.default.string,dateFormat:r.default.string,minDate:r.default.string,maxDate:r.default.string,clearButtonElement:T,showClearButton:r.default.bool},V={clearButtonElement:"×",dateFormat:(x="undefined"!=typeof window&&window.navigator?(window.navigator.userLanguage||window.navigator.language||"").toLowerCase():"",x&&"en-us"!==x?"DD/MM/YYYY":"MM/DD/YYYY"),showClearButton:!0},q={onInvalid:r.default.func,onChange:r.default.func,onClear:r.default.func,onBlur:r.default.func,onFocus:r.default.func},W={size:r.default.string,valid:r.default.bool,invalid:r.default.bool,customInputGroup:r.default.object},z={autoComplete:r.default.string,autoFocus:r.default.bool,disabled:r.default.bool,noValidate:r.default.bool,placeholder:r.default.string,required:r.default.bool,className:r.default.string,style:r.default.object,inputRef:_,customControl:r.default.object,children:r.default.oneOfType([r.default.arrayOf(r.default.node),r.default.node])},G={dayLabels:r.default.array,monthLabels:r.default.array,weekStartsOn:r.default.number,showWeeks:r.default.bool,previousButtonElement:T,nextButtonElement:T,showTodayButton:r.default.bool,todayButtonLabel:r.default.string,roundedCorners:r.default.bool,cellPadding:r.default.string,calendarPlacement:r.default.oneOfType([r.default.string,r.default.func]),calendarContainer:r.default.oneOfType([r.default.string,_])},A=i(i(i(i(i({},R),q),W),z),G),H=i(i(i({},V),{autoFocus:!1,disabled:!1,autoComplete:"on",noValidate:!1}),{cellPadding:"5px",dayLabels:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthLabels:["January","February","March","April","May","June","July","August","September","October","November","December"],previousButtonElement:"<",nextButtonElement:">",calendarPlacement:"bottom",showTodayButton:!1,todayButtonLabel:"Today",showWeeks:!1,roundedCorners:!1});function J(t,a){var{value:n,defaultValue:r,dateFormat:s,weekStartsOn:i,minDate:f,maxDate:m,onChange:h,onFocus:w,onBlur:E,onClear:k,onInvalid:C,id:B,name:O,required:P,placeholder:S,inputRef:Y,noValidate:I,valid:M,invalid:x,customInputGroup:j,style:F,className:_,autoComplete:T,autoFocus:R,disabled:V,size:q,customControl:W,showClearButton:z,clearButtonElement:G,previousButtonElement:A,nextButtonElement:H,cellPadding:J,roundedCorners:K,dayLabels:Z,monthLabels:Q,calendarPlacement:U,calendarContainer:X,showWeeks:$,showTodayButton:ee,todayButtonLabel:te,children:ae}=t,ne=((e,t)=>{if(e&&t)return"Conflicting DatePicker properties 'value' and 'defaultValue'"})(n,r);if(null!=ne)throw new Error(ne);var[le,re,oe,ue,de,ce,se]=L(U,Y,0,E,w),[ie,fe,pe,me,ve,ye,ge,he]=((t,a,n,l,r,o,u,d)=>{var[c,s]=e.useState(o.match(/[^A-Z]/)[0]),[i,f]=e.useState(null),[p,m]=e.useState(null),[h,D]=e.useState(null),[b,w]=e.useState(null);e.useEffect((()=>{s(o.match(/[^A-Z]/)[0])}),[o]),e.useEffect((()=>{var e,t=a||n,l=v(l),r=v(r),u=v(t),d=y(u),s=t?g(u,c,o):null;if(u)e=u;else{var i=v((new Date).toISOString());e=l&&Date.parse(l)>=Date.parse(i)?l:r&&Date.parse(r)<=Date.parse(i)?r:i}f(d),m(s),w(u),D(e)}),[a,n,l,r,c,o]);var E=()=>{u?u():(f(null),m(null),w(null),D(null)),d&&d(null,null)},k=e=>{var t=e.replace(new RegExp("[^0-9".concat(c,"]")),"").split(c);o.match(/MM.DD.YYYY/)||o.match(/DD.MM.YYYY/)?(t[0]&&t[0].length>2&&(t[1]=t[0].slice(2)+(t[1]||""),t[0]=t[0].slice(0,2)),t[1]&&t[1].length>2&&(t[2]=t[1].slice(2)+(t[2]||""),t[1]=t[1].slice(0,2)),t[2]&&(t[2]=t[2].slice(0,4))):(t[0]&&t[0].length>4&&(t[1]=t[0].slice(4)+(t[1]||""),t[0]=t[0].slice(0,4)),t[1]&&t[1].length>2&&(t[2]=t[1].slice(2)+(t[2]||""),t[1]=t[1].slice(0,2)),t[2]&&(t[2]=t[2].slice(0,2)));var a=t.join(c);m(a)};return[i,p,h,b,E,()=>{var e=t.current.value,a=e.replace(/(-|\/\/)/g,c).slice(0,10);if(a){var n,u,s;if(o.match(/MM.DD.YYYY/)){if(!a.match(/[0-1][0-9].[0-3][0-9].[1-2][0-9][0-9][0-9]/))return k(e);n=a.slice(0,2).replace(/[^0-9]/g,""),u=a.slice(3,5).replace(/[^0-9]/g,""),s=a.slice(6,10).replace(/[^0-9]/g,"")}else if(o.match(/DD.MM.YYYY/)){if(!a.match(/[0-3][0-9].[0-1][0-9].[1-2][0-9][0-9][0-9]/))return k(e);u=a.slice(0,2).replace(/[^0-9]/g,""),n=a.slice(3,5).replace(/[^0-9]/g,""),s=a.slice(6,10).replace(/[^0-9]/g,"")}else{if(!a.match(/[1-2][0-9][0-9][0-9].[0-1][0-9].[0-3][0-9]/))return k(e);s=a.slice(0,4).replace(/[^0-9]/g,""),n=a.slice(5,7).replace(/[^0-9]/g,""),u=a.slice(8,10).replace(/[^0-9]/g,"")}var i=parseInt(n,10),p=parseInt(u,10),g=parseInt(s,10);if(i>12||p>31)return k(e);var h=l&&Date.parse(e)<Date.parse(l),b=r&&Date.parse(e)>Date.parse(r);if(h||b)return k(e);if(!isNaN(i)&&!isNaN(p)&&!isNaN(g)&&i<=12&&p<=31&&g>999){var C=v(new Date(g,i-1,p,12,0,0,0).toISOString()),B=y(C);w(C),D(C),f(B),d&&d(B,a)}m(a)}else E()},e=>{D(e)},e=>{var t=y(e),a=g(e,c,o);m(a),w(e),D(e),f(t),d&&d(t,a)}]})(oe,n,r,f,m,s,k,h),[De,be,we]=((t,a,n)=>{var[l,r]=e.useState(D(t,a,n));return e.useEffect((()=>{r(D(t,a,n))}),[t,a,n]),l})(B,O,W);e.useImperativeHandle(a,(()=>({getValue:()=>me?me.toISOString():null,getFormattedValue:()=>pe?fe:null,getNode:()=>null==oe?void 0:oe.current})));var Ee=((t,a)=>{var[n,l]=e.useState(b(t,a));return e.useEffect((()=>{l(b(t,a))}),[t,a]),n})(Z,i);return l.default.createElement(o,{customInputGroup:j,size:q,inputId:De},l.default.createElement(p,{controlId:we,customControl:W,value:fe||"",required:P,placeholder:S||"",inputRef:oe,disabled:V,className:_,style:F,autoFocus:R,autoComplete:T,onInvalid:C,noValidate:I,valid:M,invalid:x,onFocus:()=>ce(),onBlur:e=>{var t;return se((null==e||null===(t=e.data)||void 0===t?void 0:t.rdp_close_calendar)||!1)},onChange:()=>ye()}),l.default.createElement(N,{placement:de,open:ue,container:X||re.current,target:we,previousButtonElement:A,nextButtonElement:H,displayDate:pe,minDate:f,maxDate:m,onChangeMonth:e=>ge(e),monthLabels:Q,cellPadding:J,selectedDate:me,onChange:e=>(he(e),void se(!0)),dayLabels:Ee,weekStartsOn:i,showTodayButton:ee,todayButtonLabel:te,roundedCorners:K,showWeeks:$}),l.default.createElement(u,{overlayContainerRef:re}),l.default.createElement(d,{inputId:be,name:O,value:ie||"",formattedValue:ie?fe:"",hiddenInputRef:le}),z&&!W?l.default.createElement(c,{inputValue:fe,disabled:V,clearButtonElement:G,onClick:()=>ve()}):null,ae)}var K=e.forwardRef(J);K.propTypes=A,K.defaultProps=H,exports.DatePicker=K;
